"use strict";(self.webpackChunkvue3_antd_admin=self.webpackChunkvue3_antd_admin||[]).push([[4933,2210,1817,2854,1289],{71289:function(e,n,l){l.r(n),l.d(n,{setParentChecked:function(){return t},setChildrenChecked:function(){return a},updateNodeCheckStatus:function(){return r}});const t=e=>{const n=e?.children,l=n?.length,a=!!l&&!n.some((e=>!e.checked)),r=!!l&&n.some((e=>e.checked||e.indeterminate));e.checked=a,e.indeterminate=!a&&r,e.parent&&t(e.parent)},a=(e,n)=>{e?.forEach((e=>{e.checked=n,e.indeterminate=!1,e.children?.length&&a(e.children,n)}))},r=(e,n)=>{n.checked=e,n.indeterminate=!1,Array.isArray(n.children)&&n.children?.length&&a(n.children,e),n.parent&&t(n.parent)}},90556:function(e,n,l){l.r(n),l.d(n,{menuSchemas:function(){return c}});var t=l(2262),a=l(95707),r=l(31817),o=l(710);const c=[{field:"type",component:"RadioGroup",label:"菜单类型",defaultValue:0,rules:[{required:!0,type:"number"}],componentProps:{options:[{label:"目录",value:0},{label:"菜单",value:1},{label:"权限",value:2}]}},{field:"name",component:"Input",label:"节点名称",rules:[{required:!0,type:"string"}]},{field:"parentId",component:"TreeSelect",label:"上级节点",componentProps:{fieldNames:{label:"name",value:"id"},getPopupContainer:()=>document.body},rules:[{required:!0,type:"number"}]},{field:"router",component:"Input",label:"节点路由",vIf:({formModel:e})=>2!==e.type,rules:[{required:!0,type:"string"}]},{field:"perms",component:(0,t.XI)(r.default),label:"权限",vIf:({formModel:e})=>2===e.type,rules:[{required:!0,type:"array",message:"请选择权限"}]},{field:"icon",component:(0,t.XI)(a.default),label:"节点图标",vIf:({formModel:e})=>2!==e.type},{field:"viewPath",component:"Select",label:"节点路径",vIf:({formModel:e})=>1===e.type,componentProps:{options:Object.keys(o.constantRouterComponents).map((e=>({label:e,value:e})))}},{field:"keepalive",component:"Switch",label:"是否缓存",defaultValue:!0,vIf:({formModel:e})=>1===e.type},{field:"isShow",component:"Switch",label:"是否显示",defaultValue:!0,vIf:({formModel:e})=>2!==e.type},{field:"orderNum",component:"InputNumber",label:"排序号",defaultValue:255,componentProps:{style:{width:"100%"}}}]},31817:function(e,n,l){l.r(n),l.d(n,{default:function(){return b}});l(93300);var t=l(96461),a=(l(38049),l(94776)),r=(l(89397),l(98704)),o=(l(50460),l(80044)),c=l(66252),u=l(2262),d=l(49963),i=l(3577),s=l(30167),p=l(62854),h=l(26593),m=l(60191),v=l(71289);const f={class:"input-box"};var k=(0,c.aZ)({props:{value:{type:Array,default:()=>[],isRequired:!0}},emits:["update:value"],setup(e,{emit:n}){const l=e,k=(0,h.NCN)(l,"value",n),b=(0,u.iH)(),g=(0,u.iH)((0,s.ik)()),y=o.ZP.useInjectFormItemContext(),w=(e,n=[])=>e.reduce(((e,n)=>(!n.children?.length&&n.checked&&n.value&&e.push({label:n.value,value:n.value,node:n}),n.children?.length&&w(n.children,e),e)),n),C=e=>{const n=e=>e.some((e=>!!k.value.includes(e.value)||!!e.children?.length&&n(e.children))),l=(e,t=null)=>{e?.forEach((e=>{e.children?.length&&l(e.children,e),e.parent=t,e.indeterminate=!1,e.checked=k.value.includes(e.value),e.children?.length&&(e.indeterminate=n(e.children))}))};l(e)};C(g.value);const S=()=>{k.value=[],setTimeout((()=>{g.value=(0,s.ik)(),C(g.value),b.value?.clearCheck()}))},_=(0,u.Fl)((()=>w(g.value)));return(0,c.YP)((()=>_.value),(e=>{k.value=e.map((e=>e.value)),y.onFieldChange()})),(e,n)=>((0,c.wg)(),(0,c.j4)((0,u.SU)(r.Z),{placement:"bottomLeft",trigger:"click"},{content:(0,c.w5)((()=>[(0,c.Wm)(p.default,{ref_key:"nodePanelRef",ref:b,options:g.value},null,8,["options"])])),default:(0,c.w5)((()=>[(0,c._)("div",f,[(0,c.Wm)((0,u.SU)(a.ZP),{placeholder:"请选择"},(0,c.Nv)({_:2},[(0,u.SU)(_).length?{name:"prefix",fn:(0,c.w5)((()=>[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)((0,u.SU)(_),(e=>((0,c.wg)(),(0,c.j4)((0,u.SU)(t.Z),{key:e.value,class:"tag-item",closable:"",onClose:(0,d.iM)((n=>(e=>{(0,v.updateNodeCheckStatus)(!1,e.node)})(e)),["prevent"])},{default:(0,c.w5)((()=>[(0,c.Uk)((0,i.zw)(e.label),1)])),_:2},1032,["onClose"])))),128)),(0,c.Wm)((0,u.SU)(m.Z),{class:"clear-icon",onClick:(0,d.iM)(S,["prevent"])},null,8,["onClick"])]))}:void 0]),1024)])])),_:1}))}});var b=(0,l(83744).Z)(k,[["__scopeId","data-v-5cdcbb9b"]])},62854:function(e,n,l){l.r(n),l.d(n,{default:function(){return m}});l(79861);var t=l(36993),a=l(66252),r=l(2262),o=l(3577),c=l(67944),u=l(71289);const d={class:"flex"},i={class:"ant-cascader-menu min-w-150px"},s=["onClick"],p={class:"label"};var h=(0,a.aZ)({props:{options:{type:Array,default:()=>[]}},setup(e,{expose:n}){const l=e,h=(0,r.iH)(),m=(0,r.iH)([]),v=(0,r.iH)(),f=()=>l.options?.find((e=>e.value===v.value))?.children,k=(0,r.Fl)(f);(0,a.YP)(k,(e=>{e||(m.value=[])}));return n({clearCheck:()=>{m.value.forEach((e=>{e.checked=!1,e.indeterminate=!1})),m.value.length&&setTimeout((()=>{m.value=f()||[]})),h.value?.clearCheck()}}),(n,l)=>{const f=(0,a.up)("node-panel",!0);return(0,a.wg)(),(0,a.iD)("div",d,[(0,a._)("div",i,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.options,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.value,onClick:n=>{return l=e.children,t=e.value,m.value=l||[],void(v.value=t);var l,t},class:"check-row ant-cascader-menu-item ant-cascader-menu-item-expand"},[(0,a._)("div",null,[(0,a.Wm)((0,r.SU)(t.ZP),{checked:e.checked,"onUpdate:checked":n=>e.checked=n,indeterminate:e.indeterminate,onChange:n=>((e,n)=>{const l=e.target.checked;(0,u.updateNodeCheckStatus)(l,n)})(n,e)},null,8,["checked","onUpdate:checked","indeterminate","onChange"]),(0,a._)("span",p,(0,o.zw)(e.label),1)]),e.children?.length?((0,a.wg)(),(0,a.j4)((0,r.SU)(c.Z),{key:0,class:"arrow"})):(0,a.kq)("",!0)],8,s)))),128))]),m.value?.length&&(0,r.SU)(k)?((0,a.wg)(),(0,a.j4)(f,{key:0,ref_key:"nodePanelRef",ref:h,options:m.value},null,8,["options"])):(0,a.kq)("",!0)])}}});var m=(0,l(83744).Z)(h,[["__scopeId","data-v-181ff138"]])}}]);